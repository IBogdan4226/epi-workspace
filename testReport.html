<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Report</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <style>
        body{
            background-color: #F8F8F8;
        }
        div#title{
            background-color: white;
            border-bottom: #DDD 2px solid;
            text-align: center;
            line-height: 75px;
            font-family: sans-serif;
            font-size: 24px;
            color: #666;
        }
        #report-head .container{
            padding-top: 30px;
            padding-bottom: 30px;
        }
        div.panel{
            border: #DDD 1px solid;
            background-color: white;
            min-height: 200px;
        }
        div.panel.col{
            padding: 0;
            margin: 0 5px;
        }
        div.label{
            text-align: center;
            position: relative;
            top: -12px;
        }
        .label span{
            text-transform: uppercase;
            border-radius: 15px;
            padding: 2px 10px;
            border: #ddd 1px solid;
            background-color: white;
        }
        div[id$="-value"]{
            font-family: sans-serif;
            font-size: 32px;
            color: #666;
            text-align: center;
            top: 6px;
            position: relative;
        }
        div[id$="-icon"]{
            min-height: 100px;
            background-color: #F8F8F8;
            margin: 0;
            text-align: center;
            padding-top: 20px;
        }
        div[id$="-icon"] .fa{
            font-size: 50px;
        }
        div#no-fails-icon{
            background-color: lightcoral;
            border-color: lightcoral;
            color: white;
        }
        div#no-fails-label span{
            border-color: lightcoral;
        }
        div#no-successes-icon{
            background-color: forestgreen;
            border-color: forestgreen;
            color: white;
        }
        div#no-successes-label span{
            border-color: forestgreen;
        }

        h1{
            font-size: 32px;
        }
        /*------ tables -------*/
        table{
            width: 100%;
        }
        table thead{
            font-weight: bold;
        }
        table td{
            line-height: 40px;
        }
        table thead {
            background-color: lightsteelblue;
        }
        table tr td:first-child{
            min-width: 15px;
            text-align: center;
        }
        table .fa-check{
            color: forestgreen;
        }
        table .fa-times{
            color: lightcoral;
        }

        table td{
            text-align: center;
        }

        table td:nth-child(2){
            text-align: left;
        }

        p.counter{
            font-size: 20px;
            line-height: 40px;
        }

        table a:not([href]){
            color: #007bff!important;
            cursor: pointer;
        }

        /*------ failed tables -------*/
        table#failed-tests tbody tr{

        }
        .collapsed{
            display: none;
        }
        /*------ popup -------*/
        div#popup {
            position: fixed;
            height: 100%;
            width: 100%;
            left: 0;
            top: 0;
            z-index: 1;
            display: none;
            background-color: rgba(0, 0, 0, 0.5);
        }

        #popup .container{
            position: relative;
            top: 20%;
            max-height: 60%;
            overflow: auto;
            background-color: white;
        }

        #popup-title{
            line-height: 60px;
            background-color: lightgray;
            font-size: 24px;
        }

        #popup .row {
            padding: 5px 20px;
        }

        #popup h1{
            font-size: 30px;
        }

        #popup-content .container:not(:last-child){
            border-bottom: black solid 1px;
            margin-bottom: 40px;
        }

        .row.asserts {
            display: block;
        }

        /*------ RESPONSIVE ------*/
        @media only screen and (max-width: 1024px){
            div[id$="-value"]{
                font-size: 20px;
                top: -10px;
            }

            .label span{
                font-size: 12px;
            }

            h1{
                font-size: 28px;
            }

            div.panel{
                min-height: 100px;
            }

            div[id$="-icon"]{
                min-height: 50px;
                padding-top: 10px;
            }

            div[id$="-icon"] .fa{
                font-size: 25px;
            }

            table a{
                font-size: 12px;
            }

            table td{
                font-size: 12px;
            }

            p.counter{
                font-size: 16px;
            }
        }

    </style>
</head>
<body>
<div id="report">
    <div id="report-head">
        <div id="title">Test Runner Report (TRR)</div>
        <div class="container">
            <div class="row">
                <div id="no-suites" class="panel col">
                    <div id="no-suites-icon"><span class="fa fa-folder-open-o"></span></div>
                    <div id="no-suites-label" class="label"><span>Suits</span></div>
                    <div id="no-suites-value"></div>
                </div>
                <div id="no-tests" class="panel col">
                    <div id="no-tests-icon"><span class="fa fa-bolt"></span></div>
                    <div id="no-tests-label" class="label"><span>Runned / Total</span></div>
                    <div id="no-tests-value"><span id="runned"></span><small>/<span id="total"></span></small></div>
                </div>
                <div id="duration" class="panel col">
                    <div id="no-duration-icon"><span class="fa fa-clock-o"></span></div>
                    <div id="no-duration-label" class="label"><span>Duration</span></div>
                    <div id="no-duration-value"></div>
                </div>
                <div id="fails" class="panel col">
                    <div id="no-fails-icon"><span class="fa fa-times"></span></div>
                    <div id="no-fails-label" class="label"><span>Failed</span></div>
                    <div id="no-fails-value"></div>
                </div>
                <div id="successes" class="panel col">
                    <div id="no-successes-icon"><span class="fa fa-check"></span></div>
                    <div id="no-successes-label" class="label"><span>Success Rate</span></div>
                    <div id="no-successes-value"></div>
                </div>
            </div>
        </div>

    </div>
    <div id="report-main-content">
        <div class="container" id="failed-tests">
            <div class="row">
                <h1>Failed Tests</h1>
            </div>
            <div class="row">
                <table>
                    <thead>
                    <td>
                        <span class="fa fa-chevron-up" onclick="collapse('#failed-tests-table-body', event);"></span>
                    </td>
                    <td width="55%">Name</td>
                    <td width="15%">No. of cases</td>
                    <td width="15%">No. of messages</td>
                    <td width="10%">State</td>
                    <td width="2%"></td>
                    </thead>
                    <tbody id="failed-tests-table-body"></tbody>
                </table>
            </div>
        </div>
        <div id="passed-tests" class="container">
            <div class="row">
                <h1>Passed Tests</h1>
            </div>
            <div class="row">
                <table>
                    <thead>
                    <td>
                        <span class="fa fa-chevron-up" onclick="collapse('#passed-tests-table-body', event);"></span>
                    </td>
                    <td width="55%">Name</td>
                    <td width="15%">No. of cases</td>
                    <td width="15%">No. of messages</td>
                    <td width="10%">State</td>
                    <td width="2%"></td>
                    </thead>
                    <tbody id="passed-tests-table-body"></tbody>
                </table>
            </div>
        </div>

    </div>
</div>
<div id="popup" class="test-details" onclick="closeTestDetails(event)">
    <div class="container">
        <div id="popup-title" class="row"></div>
        <div id="popup-content" class="row"></div>
    </div>
</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
</script>
<script>
    function print(dataSource){
        //console.log(dataSource);
        window.dataSource = dataSource;
        populateReportHeader(dataSource);
        buildReportMainContent(dataSource);
    }

    function populateReportHeader(dataSource){
        $("#title").html("Test Report <span>[" + new Date(dataSource.endDate).toLocaleString("en-US")+"]</span>");
        $("#no-suites-value").text(dataSource.suites.length);
        $("#total").text(dataSource.count);
        $("#runned").text(dataSource.runned);
        $("#no-fails-value").text(dataSource.failed.length);
        let rate = ((dataSource.passed.length/dataSource.count)*100).toPrecision(4);
        $("#no-successes-value").text(`${rate}%`);
        let duration = dataSource.endDate-dataSource.startDate;
        duration = duration/1000;
        $("#no-duration-value").text(`${duration}s`);
    }

    function displayTests(dataSource, resultType){
        if(dataSource[resultType].length===0){
            //if no tests are found matching resultType them hide the entire area (table)
            $(`#${resultType}-tests`).css("display", "none");
            return;
        }

        let target = $(`#${resultType}-tests-table-body`);

        $(`#${resultType}-tests h1`).parent().append(`<p class="counter"> (${dataSource[resultType].length})</p>`);
        const limita = 50;
        for(let i=0; i<dataSource[resultType].length; i++){
            let test = dataSource[resultType][i];
            let detailsPairTable = `#passed-tests-${i}`;
            let testFileName = test.data.path;
            if(test.data.path.length>limita*1.5){
                testFileName = "..."+test.data.path.substr(test.data.path.length - limita);
            }
            target.append(
                `<tr>
                    <td><span class="fa ${test.result.pass ? 'fa-check' : 'fa-times'}"/></td>
                    <td><a onclick="displayTestDetails('${resultType}', '${i}');">${testFileName}</a></td>
                    <td>${test.result.asserts.length}</td>
                    <td>${test.result.messages.length}</td>
                    <td>${test.result.state}</td>
                    <td><a href="${test.data.path}"><span class="fa fa-file"></span></a></td>
                </tr>`);
        }
    }

    function buildReportMainContent(dataSource){
        displayTests(dataSource, "failed");
        displayTests(dataSource, "passed");
    }

    function collapse(target, event){
        $(target).toggleClass("collapsed");
        $(event.target).toggleClass("fa-chevron-up").toggleClass("fa-chevron-down");
    }

    function displayTestDetails(testType, index){
        let popupContainer = $("#popup-content");
        test = window.dataSource[testType][index];

        let pop_asserts = "";
        for(let i=0; i<test.result.asserts.length; i++){
            let message = test.result.asserts[i];
            if(typeof message !== "string"){
                if(typeof message === "object" && !Array.isArray(message) && typeof message.message !== "undefined"){
                    message = message.message;
                }else{
                    message = JSON.stringify(message);
                }
            }
            message = message.replace(new RegExp("\n", 'g'), "<br>");
            pop_asserts+=`<div>${message}</div>`;
        }

        if(pop_asserts.length === 0){
            popupContainer.append(`<div class='container'><div class='row'><h3>Test cases</h3></div><div class='row asserts'>No cases tested.</div></div>`);
        }else{
            popupContainer.append(`<div class='container'><div class='row'><h3>Test cases</h3></div><div class='row asserts'>${pop_asserts}</div></div>`);
        }

        let pop_console = "";
        for(let i=0; i<test.result.messages.length; i++){
            let message = test.result.messages[i];
            if(typeof message !== "string"){
                message = JSON.stringify(message);
            }
            message = message.replace(new RegExp("\n", 'g'), "<br>");
            pop_console+=`<div style="display: block;width: 100%;font-family: monospace;font-size: 16px;">${message}</div>`;
        }

        popupContainer.append(`<div class='container'><div class='row'><h3>Console messages</h3></div><div class='row'>${pop_console}</div></div>`);

        $("#popup-title").html(`<h1>Test ${test.data.name} details</h1>`);
        $("#popup").css("display", "block");
        //always scroll on top
		document.getElementById("popup-title").parentNode.scrollTop = 0;
    }

    function closeTestDetails(event){
        if($(event.target).attr("id") === "popup"){
            $("#popup").css("display", "none");
            $("#popup-content").html("");
        }
    }
</script>
<script>
print({"count":5,"suites":["/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests"],"passed":[{"__meta":{"conf":{"runs":1},"parent":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests","isDirectory":false},"data":{"name":"groupingTest.js","path":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/groupingTest.js"},"result":{"state":"finished","pass":true,"executionTime":0,"runs":0,"asserts":[{"level":11,"type":"assert","timestamp":1647443602523,"message":"[Pass] message grouping test "}],"messages":["Logger not available, using console\n","Redefining require for node\n","VirtualMQ running in test environment\n","[TIR][INFO] Using the following options for launcher {\n  maxTries: 1,\n  rootFolder: '/tmp/testFolderhMTirZ',\n  serverConfig: {},\n  domains: [ 'default', 'test1', 'test2', { name: 'vault', config: [Object] } ],\n  bdns: null,\n  validatorDID: null,\n  validators: null,\n  useWorker: false,\n  bricksLedgerConfig: null,\n  includeDefaultDomains: true,\n  contractBuildFilePath: null,\n  generateValidatorDID: false,\n  onPortAquired: null,\n  onBeforeServerStart: null,\n  storageFolder: '/tmp/testFolderhMTirZ/external-volume'\n}\n","[TIR][INFO] Generated random port 46391\n","[TIR][INFO] TIR is checking if port 46391 is available. Please wait...\n","[TIR][INFO] Port 46391 is available\n","[TIR][INFO] Storing file 'apihub.json' at /tmp/testFolderhMTirZ/external-volume/config... {\"host\":\"localhost\",\"port\":46391}\n","[TIR][INFO] Storing file 'default.json' at /tmp/testFolderhMTirZ/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/testFolderhMTirZ/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/testFolderhMTirZ/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/testFolderhMTirZ/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{}},\"enable\":[\"mq\"]}\n","[TIR][INFO] Using the following BDNS content for http://localhost:46391: {\n  default: {\n    replicas: [],\n    notifications: [ 'http://localhost:46391' ],\n    brickStorages: [ 'http://localhost:46391' ],\n    anchoringServices: [ 'http://localhost:46391' ],\n    contractServices: [ 'http://localhost:46391' ],\n    validators: []\n  },\n  test1: {\n    replicas: [],\n    notifications: [ 'http://localhost:46391' ],\n    brickStorages: [ 'http://localhost:46391' ],\n    anchoringServices: [ 'http://localhost:46391' ],\n    contractServices: [ 'http://localhost:46391' ],\n    validators: []\n  },\n  test2: {\n    replicas: [],\n    notifications: [ 'http://localhost:46391' ],\n    brickStorages: [ 'http://localhost:46391' ],\n    anchoringServices: [ 'http://localhost:46391' ],\n    contractServices: [ 'http://localhost:46391' ],\n    validators: []\n  },\n  vault: {\n    replicas: [],\n    notifications: [ 'http://localhost:46391' ],\n    brickStorages: [ 'http://localhost:46391' ],\n    anchoringServices: [ 'http://localhost:46391' ],\n    contractServices: [ 'http://localhost:46391' ],\n    validators: []\n  }\n}\n","[TIR][INFO] Storing file 'default.json' at /tmp/testFolderhMTirZ/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:46391\"],\"brickStorages\":[\"http://localhost:46391\"],\"anchoringServices\":[\"http://localhost:46391\"],\"contractServices\":[\"http://localhost:46391\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/testFolderhMTirZ/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:46391\"],\"brickStorages\":[\"http://localhost:46391\"],\"anchoringServices\":[\"http://localhost:46391\"],\"contractServices\":[\"http://localhost:46391\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/testFolderhMTirZ/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:46391\"],\"brickStorages\":[\"http://localhost:46391\"],\"anchoringServices\":[\"http://localhost:46391\"],\"contractServices\":[\"http://localhost:46391\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/testFolderhMTirZ/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:46391\"],\"brickStorages\":[\"http://localhost:46391\"],\"anchoringServices\":[\"http://localhost:46391\"],\"contractServices\":[\"http://localhost:46391\"],\"validators\":[]}\n","[TIR][INFO] Starting apihub instance... [ 46391, '/tmp/testFolderhMTirZ' ]\n","Fix this: This could generate memory leaks. Fix it later\n","Trying to read the apihub.json file from the location pointed by PSK_CONFIG_LOCATION env variable.\n","Loading config for domain 'default'\n","Loading config for domain 'test1'\n","Loading config for domain 'test2'\n","Loading config for domain 'vault'\n","[API-HUB] Trying to listen on port 46391\n","Registering Logger middleware\n","[API-HUB] generic error middleware was loaded. This middleware will prevent any error to leak when sending a >=400 response to the client.\n","[API-HUB] Request API enhancements were set up.\n","Registering IframeHandler middleware\n","Using boot script for worker: /home/runner/work/epi-workspace/epi-workspace/privatesky/./psknode/bundles/nodeBoot.js\n","[API-HUB] Preparing to register middleware from path ./components/config\n","[API-HUB] Not able to find config for component called < config >. Excluding it from the active components list!\n","[API-HUB] Preparing to register middleware from path ./components/mqHub\n","Preparing to register mq endpoints for domain < vault > ... \n","Loading Local MQ Adapter for domain: vault\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Warning: Local MQ Adapter should be used only during development!\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Successfully register mq endpoints for domain < vault >.\n","[API-HUB] Preparing to register middleware from path ./components/enclave\n","[API-HUB] Preparing to register middleware from path ./components/secrets\n","[API-HUB] Preparing to register middleware from path ./components/channelManager\n","Failed to load module  zeromq  with error: Cannot find module 'zeromq'\nRequire stack:\n- /home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js\n- /home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/groupingTest.js\n","zeroMQ not available at this moment.\n","[API-HUB] Preparing to register middleware from path ./components/mqManager\n","[API-HUB] Preparing to register middleware from path ./components/keySsiNotifications\n","[API-HUB] Preparing to register middleware from path ./components/fileManager\n","[API-HUB] Preparing to register middleware from path ./components/bdns\n","[API-HUB] Preparing to register middleware from path ./components/bricking\n","[API-HUB] Preparing to register middleware from path ./components/anchoring\n","[API-HUB] Preparing to register middleware from path ./components/bricksFabric\n","[API-HUB] Preparing to register middleware from path ./components/contracts\n","[API-HUB] Preparing to register middleware from path dsu-wizard\n","[API-HUB] apihub.getServerConfig() method is deprecated, please use server.config to retrieve necessary info.\n","[API-HUB] apihub.getServerConfig() method is deprecated, please use server.config to retrieve necessary info.\n","Registering url /dsu-wizard/:domain/addFile/:transactionId post\n","Registering url /dsu-wizard/:domain/mount/:transactionId post\n","Registering url /dsu-wizard/:domain/setKeySSI/:transactionId post\n","Registering url /dsu-wizard/:domain/copy/:transactionId post\n","[API-HUB] Preparing to register middleware from path ./components/debugLogger\n","[API-HUB] apihub.getServerConfig() method is deprecated, please use server.config to retrieve necessary info.\n","[API-HUB] Preparing to register middleware from path ./components/staticServer\n","Message 5\n","Message 3\n","Message 1\n"]},"items":null},{"__meta":{"conf":{"runs":1},"parent":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests","isDirectory":false},"data":{"name":"validateSchemaTest.js","path":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/validateSchemaTest.js"},"result":{"state":"finished","pass":true,"executionTime":0,"runs":0,"asserts":[{"level":11,"type":"assert","timestamp":1647443604720,"message":"[Pass] SchemaValidate test"}],"messages":["Logger not available, using console\n","Redefining require for node\n","Fix this: This could generate memory leaks. Fix it later\n"]},"items":null}],"failed":[{"__meta":{"conf":{"runs":1},"parent":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests","isDirectory":false},"data":{"name":"apihubAllMessagesTest.js","path":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/apihubAllMessagesTest.js"},"result":{"state":"finished","pass":false,"executionTime":0,"runs":0,"asserts":[],"messages":["Logger not available, using console\n","Redefining require for node\n","VirtualMQ running in test environment\n","Logger not available, using console\n","Redefining require for node\n","VirtualMQ running in test environment\n","[TIR][INFO] Using the following options for launcher {\n  domains: [\n    { name: 'default', config: [Object] },\n    'test1',\n    'test2',\n    { name: 'vault', config: [Object] }\n  ],\n  serverConfig: {\n    activeComponents: [\n      'bdns',\n      'bricksLedger',\n      'bricksFabric',\n      'bricking',\n      'anchoring',\n      'epi-mapping-engine-results',\n      'mq'\n    ],\n    componentsConfig: { 'epi-mapping-engine-results': [Object] }\n  },\n  rootFolder: '/tmp/enclaveBuffering87348RZEjU',\n  maxTries: 100,\n  bdns: null,\n  validatorDID: null,\n  validators: null,\n  useWorker: false,\n  bricksLedgerConfig: null,\n  includeDefaultDomains: true,\n  contractBuildFilePath: null,\n  generateValidatorDID: false,\n  onPortAquired: null,\n  onBeforeServerStart: null,\n  storageFolder: '/tmp/enclaveBuffering87348RZEjU/external-volume'\n}\n","[TIR][INFO] Generated random port 14882\n","[TIR][INFO] TIR is checking if port 14882 is available. Please wait...\n","[TIR][INFO] Port 14882 is available\n","[TIR][INFO] Storing file 'apihub.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config... {\"activeComponents\":[\"bdns\",\"bricksLedger\",\"bricksFabric\",\"bricking\",\"anchoring\",\"epi-mapping-engine-results\",\"mq\"],\"componentsConfig\":{\"epi-mapping-engine-results\":{\"module\":\"/home/runner/work/epi-workspace/epi-workspace/epi-utils/\",\"function\":\"getEPIMappingEngineMessageResults\"}},\"host\":\"localhost\",\"port\":14882}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{\"enableBricksLedger\":false},\"commands\":{\"addAnchor\":\"anchor\"}},\"enable\":[\"mq\",\"enclave\"]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{}},\"enable\":[\"mq\"]}\n","[TIR][INFO] Using the following BDNS content for http://localhost:14882: {\n  default: {\n    replicas: [],\n    notifications: [ 'http://localhost:14882' ],\n    brickStorages: [ 'http://localhost:14882' ],\n    anchoringServices: [ 'http://localhost:14882' ],\n    contractServices: [ 'http://localhost:14882' ],\n    validators: []\n  },\n  test1: {\n    replicas: [],\n    notifications: [ 'http://localhost:14882' ],\n    brickStorages: [ 'http://localhost:14882' ],\n    anchoringServices: [ 'http://localhost:14882' ],\n    contractServices: [ 'http://localhost:14882' ],\n    validators: []\n  },\n  test2: {\n    replicas: [],\n    notifications: [ 'http://localhost:14882' ],\n    brickStorages: [ 'http://localhost:14882' ],\n    anchoringServices: [ 'http://localhost:14882' ],\n    contractServices: [ 'http://localhost:14882' ],\n    validators: []\n  },\n  vault: {\n    replicas: [],\n    notifications: [ 'http://localhost:14882' ],\n    brickStorages: [ 'http://localhost:14882' ],\n    anchoringServices: [ 'http://localhost:14882' ],\n    contractServices: [ 'http://localhost:14882' ],\n    validators: []\n  }\n}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:14882\"],\"brickStorages\":[\"http://localhost:14882\"],\"anchoringServices\":[\"http://localhost:14882\"],\"contractServices\":[\"http://localhost:14882\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:14882\"],\"brickStorages\":[\"http://localhost:14882\"],\"anchoringServices\":[\"http://localhost:14882\"],\"contractServices\":[\"http://localhost:14882\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:14882\"],\"brickStorages\":[\"http://localhost:14882\"],\"anchoringServices\":[\"http://localhost:14882\"],\"contractServices\":[\"http://localhost:14882\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering87348RZEjU/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:14882\"],\"brickStorages\":[\"http://localhost:14882\"],\"anchoringServices\":[\"http://localhost:14882\"],\"contractServices\":[\"http://localhost:14882\"],\"validators\":[]}\n","[TIR][INFO] Starting apihub instance... [ 14882, '/tmp/enclaveBuffering87348RZEjU' ]\n","Fix this: This could generate memory leaks. Fix it later\n","Trying to read the apihub.json file from the location pointed by PSK_CONFIG_LOCATION env variable.\n","Loading config for domain 'default'\n","Loading config for domain 'test1'\n","Loading config for domain 'test2'\n","Loading config for domain 'vault'\n","[API-HUB] Trying to listen on port 14882\n","Registering Logger middleware\n","[API-HUB] generic error middleware was loaded. This middleware will prevent any error to leak when sending a >=400 response to the client.\n","[API-HUB] Request API enhancements were set up.\n","Registering IframeHandler middleware\n","Using boot script for worker: /home/runner/work/epi-workspace/epi-workspace/privatesky/./psknode/bundles/nodeBoot.js\n","[API-HUB] Preparing to register middleware from path ./components/config\n","[API-HUB] Not able to find config for component called < bricksLedger >. Excluding it from the active components list!\n","[API-HUB] Preparing to register middleware from path ./components/bdns\n","[API-HUB] Preparing to register middleware from path ./components/bricksFabric\n","[API-HUB] Preparing to register middleware from path ./components/bricking\n","[API-HUB] Preparing to register middleware from path ./components/anchoring\n","[API-HUB] Preparing to register middleware from path /home/runner/work/epi-workspace/epi-workspace/epi-utils/\n","[API-HUB] Preparing to register middleware from path ./components/mqHub\n","Preparing to register mq endpoints for domain < default > ... \n","Loading Local MQ Adapter for domain: default\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Warning: Local MQ Adapter should be used only during development!\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Successfully register mq endpoints for domain < default >.\n","Preparing to register mq endpoints for domain < vault > ... \n","Loading Local MQ Adapter for domain: vault\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nWarning: Local MQ Adapter should be used only during development!\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Successfully register mq endpoints for domain < vault >.\n","[TIR][INFO] Using the following options for launcher {\n  domains: [\n    { name: 'default', config: [Object] },\n    'test1',\n    'test2',\n    { name: 'vault', config: [Object] }\n  ],\n  serverConfig: {\n    activeComponents: [\n      'bdns',\n      'bricksLedger',\n      'bricksFabric',\n      'bricking',\n      'anchoring',\n      'epi-mapping-engine',\n      'epi-mapping-engine-results'\n    ],\n    componentsConfig: {\n      'epi-mapping-engine': [Object],\n      'epi-mapping-engine-results': [Object]\n    }\n  },\n  rootFolder: '/tmp/enclaveBuffering4951PY0ZPz',\n  maxTries: 100,\n  bdns: null,\n  validatorDID: null,\n  validators: null,\n  useWorker: false,\n  bricksLedgerConfig: null,\n  includeDefaultDomains: true,\n  contractBuildFilePath: null,\n  generateValidatorDID: false,\n  onPortAquired: null,\n  onBeforeServerStart: null,\n  storageFolder: '/tmp/enclaveBuffering4951PY0ZPz/external-volume'\n}\n","[TIR][INFO] Generated random port 39058\n","[TIR][INFO] TIR is checking if port 39058 is available. Please wait...\n","[TIR][INFO] Port 39058 is available\n","[TIR][INFO] Storing file 'apihub.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config... {\"activeComponents\":[\"bdns\",\"bricksLedger\",\"bricksFabric\",\"bricking\",\"anchoring\",\"epi-mapping-engine\",\"epi-mapping-engine-results\"],\"componentsConfig\":{\"epi-mapping-engine\":{\"module\":\"/home/runner/work/epi-workspace/epi-workspace/epi-utils/\",\"function\":\"getEPIMappingEngineForAPIHUB\"},\"epi-mapping-engine-results\":{\"module\":\"/home/runner/work/epi-workspace/epi-workspace/epi-utils/\",\"function\":\"getEPIMappingEngineMessageResults\"}},\"host\":\"localhost\",\"port\":39058}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{\"enableBricksLedger\":false},\"commands\":{\"addAnchor\":\"anchor\"}},\"messagesEndPoints\":[{\"endPointId\":\"endpoint\",\"endPointURL\":\"http://localhost:14882/mappingEngine/default/default/saveResult\"}]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{}},\"enable\":[\"mq\"]}\n","[TIR][INFO] Using the following BDNS content for http://localhost:39058: {\n  default: {\n    replicas: [],\n    notifications: [ 'http://localhost:39058' ],\n    brickStorages: [ 'http://localhost:39058' ],\n    anchoringServices: [ 'http://localhost:39058' ],\n    contractServices: [ 'http://localhost:39058' ],\n    validators: []\n  },\n  test1: {\n    replicas: [],\n    notifications: [ 'http://localhost:39058' ],\n    brickStorages: [ 'http://localhost:39058' ],\n    anchoringServices: [ 'http://localhost:39058' ],\n    contractServices: [ 'http://localhost:39058' ],\n    validators: []\n  },\n  test2: {\n    replicas: [],\n    notifications: [ 'http://localhost:39058' ],\n    brickStorages: [ 'http://localhost:39058' ],\n    anchoringServices: [ 'http://localhost:39058' ],\n    contractServices: [ 'http://localhost:39058' ],\n    validators: []\n  },\n  vault: {\n    replicas: [],\n    notifications: [ 'http://localhost:39058' ],\n    brickStorages: [ 'http://localhost:39058' ],\n    anchoringServices: [ 'http://localhost:39058' ],\n    contractServices: [ 'http://localhost:39058' ],\n    validators: []\n  }\n}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:39058\"],\"brickStorages\":[\"http://localhost:39058\"],\"anchoringServices\":[\"http://localhost:39058\"],\"contractServices\":[\"http://localhost:39058\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:39058\"],\"brickStorages\":[\"http://localhost:39058\"],\"anchoringServices\":[\"http://localhost:39058\"],\"contractServices\":[\"http://localhost:39058\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:39058\"],\"brickStorages\":[\"http://localhost:39058\"],\"anchoringServices\":[\"http://localhost:39058\"],\"contractServices\":[\"http://localhost:39058\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering4951PY0ZPz/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:39058\"],\"brickStorages\":[\"http://localhost:39058\"],\"anchoringServices\":[\"http://localhost:39058\"],\"contractServices\":[\"http://localhost:39058\"],\"validators\":[]}\n","[TIR][INFO] Starting apihub instance... [ 39058, '/tmp/enclaveBuffering4951PY0ZPz' ]\n","Fix this: This could generate memory leaks. Fix it later\n","Trying to read the apihub.json file from the location pointed by PSK_CONFIG_LOCATION env variable.\n","Loading config for domain 'default'\n","Loading config for domain 'test1'\n","Loading config for domain 'test2'\n","Loading config for domain 'vault'\n","[API-HUB] Trying to listen on port 39058\n","Registering Logger middleware\n","[API-HUB] generic error middleware was loaded. This middleware will prevent any error to leak when sending a >=400 response to the client.\n","[API-HUB] Request API enhancements were set up.\n","Registering IframeHandler middleware\n","Using boot script for worker: /home/runner/work/epi-workspace/epi-workspace/privatesky/./psknode/bundles/nodeBoot.js\n","[API-HUB] Preparing to register middleware from path ./components/config\n","[API-HUB] Not able to find config for component called < bricksLedger >. Excluding it from the active components list!\n","[API-HUB] Preparing to register middleware from path ./components/bdns\n","[API-HUB] Preparing to register middleware from path ./components/bricksFabric\n","[API-HUB] Preparing to register middleware from path ./components/bricking\n","[API-HUB] Preparing to register middleware from path ./components/anchoring\n","[API-HUB] Preparing to register middleware from path /home/runner/work/epi-workspace/epi-workspace/epi-utils/\n","[API-HUB] Preparing to register middleware from path /home/runner/work/epi-workspace/epi-workspace/epi-utils/\n","127.0.0.1:39058 - [2022-03-16T15:13:18.324Z] GET:/bdns 200 2.367ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.344Z] PUT:/bricking/default/put-brick 201 4.365ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.360Z] PUT:/bricking/default/put-brick 201 1.171ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.372Z] GET:/anchor/default/get-last-version/4K8K3xZfdsFugXRpFp9wP8ZEsPdZBQRoMDd3Qi3YyR4RBwfjsrciduQaPdLZqFkdNmjPJcedbgNjTd72iZCwG1ZeTHaTD9tCtEfUS6Enc3VNm4GU6CLDXyk4EJiPBAo9pGZKb4TE4BoGLqtXaTvX 200 2.4ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.381Z] PUT:/anchor/default/create-anchor/4K8K3xZfdsFugXRpFp9wP8ZEsPdZBQRoMDd3Qi3YyR4RBwfjsrciduQaPdLZqFkdNmjPJcedbgNjTd72iZCwG1ZeTHaTD9tCtEfUS6Enc3VNm4GU6CLDXyk4EJiPBAo9pGZKb4TE4BoGLqtXaTvX/8iQ1THWriEFDQiKd2UTA7SxMCHLFMaaQWXCZYh8MsDWhRjNew6ii2YCuAhrUxNSdUZiHDFWA9bpwpKjr96Vt3MAMHWMVxrVypsNTkT7TzKLXufbdocjJJt4Dvh3LENpRgQQzEw5GSUWnasG6ECSM9KSpC78zddtYxr44CUvB7MSejsFzfjUxwiASAspCtibHJLY5b59yztiNQyWZkNAunKKaGcMgV1TJVZy 201 3.301ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.389Z] PUT:/bricking/default/put-brick 201 1.139ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.395Z] PUT:/bricking/default/put-brick 201 1.12ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.404Z] GET:/anchor/default/get-last-version/4K8K3xZfdsFugXRpFp9wP8ZEsQbm3LvZKedCWTdxmMsQ7UafgPKCbVFqkSg6vAh4BeURkEGXYRL5B6uft5nPqUqwn3E1h29XR3zxjU8qm5f2GVLf5hmDXZY7iXSjC6P8ryEzEC17o9LKcaJf7GVD 200 1.341ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.410Z] PUT:/anchor/default/create-anchor/4K8K3xZfdsFugXRpFp9wP8ZEsQbm3LvZKedCWTdxmMsQ7UafgPKCbVFqkSg6vAh4BeURkEGXYRL5B6uft5nPqUqwn3E1h29XR3zxjU8qm5f2GVLf5hmDXZY7iXSjC6P8ryEzEC17o9LKcaJf7GVD/8iQ1THWriEFDQiKd2UTA7SwyiqPd9UT9r8VoHBRbRCHPhfZ3oCsv2ZcKM24jhBWa328qqD9LEX1VYyMKnpJroTrUyeUuMBx4FaVWnqZgQyeuxdp75AMvMo5hVofagbS6QA83qhgsjbzr7YRguWzx8UEUCwJCBh4HA84EEebXcs8mfPXzz8CRAc517c52wMUcdvHcbZXP1CdNCFgVPP8U73Qaf5CLxLHqda7 201 2.76ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.421Z] PUT:/bricking/default/put-brick 201 1.052ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.426Z] PUT:/bricking/default/put-brick 201 1.031ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.433Z] GET:/anchor/default/get-all-versions/4K8K3xZfdsFugXRpFp9wP8ZEsQbm3LvZKedCWTdxmMsQ7UafgPKCbVFqkSg6vAh4BeURkEGXYRL5B6uft5nPqUqwn3E1h29XR3zxjU8qm5f2GVLf5hmDXZY7iXSjC6P8ryEzEC17o9LKcaJf7GVD 200 3.84ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.440Z] PUT:/anchor/default/append-to-anchor/4K8K3xZfdsFugXRpFp9wP8ZEsQbm3LvZKedCWTdxmMsQ7UafgPKCbVFqkSg6vAh4BeURkEGXYRL5B6uft5nPqUqwn3E1h29XR3zxjU8qm5f2GVLf5hmDXZY7iXSjC6P8ryEzEC17o9LKcaJf7GVD/8iQ1THWriEFDQiKd2UTA7SxDqASMMWpae6pRtExKpAhB6GQPq3NbCKtNS4FFYN2rMWZgY3CEPsPeSyAgqauVqU38q3q9gSNNSkXoFTGdFBAht4KogYQXad1EQoHja7xCndFjePezfubsnEbNHtkDtMUeFu6kY3ikqdH53K3rgQ5R9ZX6B2wP1tdAqxAmiavWHALKs1Jt8r3NW8ffn9ZxYwaAzxxZ8avYS1d 201 3.6ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.449Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.355ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.458Z] PUT:/bricking/vault/put-brick 201 1.259ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.463Z] PUT:/bricking/vault/put-brick 201 1.024ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.469Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9 200 1.379ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.475Z] PUT:/anchor/vault/create-anchor/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9/PxygXrtbKyLQ522BXWKvRYovFe9wNQwS6kJCiV7mqDSyMgbQn4qoW2trhhGRWGXJVe4ER211tzMm8KH6pPxEgAMDJLDWtmjY8DMCDyCCvednvSvHqTXDFrmUBkNj7UbHNtFxRqbRrJWT2T9zts5w6ywBZbJM7Vr3zZSqG4Q6LTWoZQaD53X4AUsD3wNuEAwFFF13VEZj52g7VSB2LijxZ2G2R7nzE2DV 201 2.745ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.487Z] PUT:/bricking/vault/put-brick 201 11.137ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.501Z] PUT:/bricking/vault/put-brick 201 0.965ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.504Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.126ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.507Z] PUT:/anchor/vault/create-anchor/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd/2ZJYQfUMTmozJapVdoEYCMd26hjkowDTqTu2FjYn24ynWHXW8CgWawjPRUGrcgsm82VWaGGYReEDWS7ui4WB 201 1.349ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.511Z] PUT:/bricking/vault/put-brick 201 0.955ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.515Z] PUT:/bricking/vault/put-brick 201 0.933ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.521Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9 200 2.738ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.527Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9/PxygXrtbKyLQ522BXWKxPTHXQThFpLrGDtsbMsqmRfhrqyC8R62mzTHwNPCrUju2R9XBwbeogqfp3aPnjsDZQuFjpuRCBfLTXgGnE4b81kpWXEU69T9EXd7Vp1MWLPC6BnU2gnuPY8H4dEXezVCbHPDywbGL2XLUXj3Jh1SBfFp6KCga4re4oroa61hN5ojQDTSczdD5KWuetY8YMFrWx2SjxhjZDQL7 201 5.617ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.535Z] GET:/bricking/vault/get-brick/DpZCD1sDMbwTfVhtYPXKLwNpDv3HHQ2UR6qNVZ19oRdq 200 1.133ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.540Z] PUT:/bricking/vault/put-brick 201 0.922ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.544Z] PUT:/bricking/vault/put-brick 201 0.942ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.550Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8ioqhbgMY2aUXDCUrWWbGVMMf6MdPfU6PTjSFcgE3jtuvDTEd7PEzqEKtXFhNLUAuimKJpGfGvwr6VQzzMGZejAtNfHe3CTzLjj257QA6MzzCAXrBMhzqTaPhA94Ns 200 1.116ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.555Z] PUT:/anchor/vault/create-anchor/ArzZh8TxNMevR6QanDX8ioqhbgMY2aUXDCUrWWbGVMMf6MdPfU6PTjSFcgE3jtuvDTEd7PEzqEKtXFhNLUAuimKJpGfGvwr6VQzzMGZejAtNfHe3CTzLjj257QA6MzzCAXrBMhzqTaPhA94Ns/PxygXrtbKyLQ522BXWKv4L8FyfKkPQTchdFysScD8gU6765G9NNQfXAwvb8nSMAEjSDf5GA3vb2Dw4rgewZxxbbmN8ZuPsCx3FvDfCFwFvomBaWodqCp4V6Z7Cz5XrVb8NDNjCLQNLupiNgkMfmU7Q5k6MdyQs63mXjoC8S7F653Vhkvh6WK6CrHkGsJjf8uYht17DCx5PTydjWChgohG9QnuYyBq2Pq 201 2.459ms\n","The function \"getWalletDB is obsolete. Use getSimpleWalletDB instead\n","127.0.0.1:39058 - [2022-03-16T15:13:18.564Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8ioqhbgMY2aUXDCUrWWbGVMMf6MdPfU6PTjSFcgE3jtuvDTEd7PEzqEKtXFhNLUAuimKJpGfGvwr6VQzzMGZejAtNfHe3CTzLjj257QA6MzzCAXrBMhzqTaPhA94Ns 200 2.944ms\n",">>> No observers found for event type initialised\nFinishing initialisation\n",">>> No observers found for event type warn\n>>> Loading a shared database\n","127.0.0.1:39058 - [2022-03-16T15:13:18.572Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.354ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.575Z] PUT:/bricking/vault/put-brick 201 1.128ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.579Z] PUT:/bricking/vault/put-brick 201 0.926ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.585Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9 200 3.659ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.592Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9/PxygXrtbKyLQ522BXWKuuyNwniaNkayTtqVSUY1C3Y7gHctwCFzuwTL2tDeRVoeJMU2cvrad6s5Rz99RMWZAJoRRQodfVWgPc75iciFT7TB9qrLtiK28UGuvB7jjgzneFJJyUVu1f4i9zSBfbV4kqaBCMvyvX6dHLdkcCdUsUkLo2rE1a3ikHJrTy8DpnBgLXyd8Wr4JUSF9GKGbyPQkwkKZHrSRftSB 201 3.285ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.598Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.319ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.600Z] GET:/bricking/vault/get-brick/3yVjuMfwRUbw9yPkmmA3Ers6oivDuHMwXV3wMaBX7z2B 200 0.892ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.605Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 6.803ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.621Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 3.49ms\n",">>> No observers found for event type initialised\n",">>> No observers found for event type initialised\n","127.0.0.1:39058 - [2022-03-16T15:13:18.628Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.714ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.632Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.345ms\n","The function \"getWalletDB is obsolete. Use getSimpleWalletDB instead\n","127.0.0.1:39058 - [2022-03-16T15:13:18.638Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8ioqhbgMY2aUXDCUrWWbGVMMf6MdPfU6PTjSFcgE3jtuvDTEd7PEzqEKtXFhNLUAuimKJpGfGvwr6VQzzMGZejAtNfHe3CTzLjj257QA6MzzCAXrBMhzqTaPhA94Ns 200 4.568ms\n",">>> No observers found for event type initialised\n","Finishing initialisation\n",">>> No observers found for event type warn\n>>> Loading a shared database\n","127.0.0.1:39058 - [2022-03-16T15:13:18.641Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 2.668ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.647Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.314ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.650Z] PUT:/bricking/vault/put-brick 201 1.075ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.661Z] PUT:/bricking/vault/put-brick 201 1.124ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.667Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9 200 4.885ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.676Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9/PxygXrtbKyLQ522BXWKwfGT6zw4rZhYm44A2XCjSHpoVv5wnMo97wX665Cf2MVVmckvnL7Q7nDnQ1ay536V3ZFGxoVSbiL23wq2otwWaJN3unt7mdpZBBBCr8sSrZwYhsjB6WbXoBXKmYXL7uv2GbXAuhE6f9gcyQb2fPU7uVdhfPzxMqPafujgWTiZyDrAHmN5C3CRtxZM1V9A3FXHrzEgMjA17n41V 201 3.584ms\n","Function already promisified\n","EPI Mapping Engine called for domain:  default, and walletSSI : BBudGH6ySHG6GUHN8ogNrTWdCoKxdFbzViURuqWkDJptExgCipR1DEa2vFQNsGw8v4eYvHdrsGDTqFdFdE5Spy49d\n","[API-HUB] apihub.getServerConfig() method is deprecated, please use server.config.getDomainConfig(...) to retrieve necessary info.\n","127.0.0.1:39058 - [2022-03-16T15:13:18.691Z] GET:/anchor/default/get-last-version/4K8K3xZfdsFugXRpFp9wP8ZEsQbm3LvZKedCWTdxmMsQ7UafgPKCbVFqkSg6vAh4BeURkEGXYRL5B6uft5nPqUqwn3E1h29XR3zxjU8qm5f2GVLf5hmDXZY7iXSjC6P8ryEzEC17o9LKcaJf7GVD 200 1.692ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.695Z] GET:/bricking/default/get-brick/GgSvb4Zmqc4P9FkXcWVAGGWk3NxGaVMDkcpeTKhcxidU 200 1.046ms\n","[MAPPING ENGINE]: 2 new messages arrived. Processing...\n","New GTIN_SSI in domain:default and bricksDomain:default\n","Unable to find a suitable mapping to handle the following message: {\"messageType\":\"Product Wrong message type\",\"messageTypeVersion\":0.1,\"senderId\":\"endpoint\",\"receiverId\":\"\",\"messageId\":\"482013\",\"messageDateTime\":\"2022-02-16T13:25:58.633Z\",\"token\":\"\",\"product\":{\"inventedName\":\"test\",\"productCode\":\"23656250095605\",\"nameMedicinalProduct\":\"tst 40 mg\",\"manufName\":\"\",\"adverseEventReportingURL\":\"http://localhost:8080/borest/scan\",\"acfProductCheckURL\":\"http://localhost:8080/borest/scan\",\"flagEnableAdverseEventReporting\":true,\"flagEnableACFProductCheck\":true,\"flagDisplayEPI_BatchRecalled\":false,\"flagDisplayEPI_SNRecalled\":false,\"flagDisplayEPI_SNDecommissioned\":false,\"flagDisplayEPI_SNUnknown\":false,\"flagDisplayEPI_EXPIncorrect\":false,\"flagDisplayEPI_BatchExpired\":true,\"healthcarePractitionerInfo\":\"SmPC\",\"patientSpecificLeaflet\":\"Patient Information\",\"markets\":[{\"marketId\":\"PT\",\"nationalCode\":\"PRT\",\"mahName\":\"MAH name\",\"legalEntityName\":\"Legal name\"}],\"internalMaterialCode\":\"\",\"strength\":\"\",\"flagDisplayEPI_BatchNumberUnknown\":true}}\n","127.0.0.1:39058 - [2022-03-16T15:13:18.686Z] PUT:/mappingEngine/default/default 200 20.624ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.709Z] GET:/anchor/default/get-last-version/3JstiXLNpRW3C5xu4UNNE74ynNhMdyneu3VxHi9fAQgJzywETSJSvprQXkfeWToQ8EfDFGEMBrF48U1w4xZSm36P 200 1.03ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.708Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 4.65ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.713Z] GET:/anchor/default/get-last-version/3JstiXLNpRW3C5xu4UNNE74ynNhMdyneu3VxHi9fAQgJzywETSJSvprQXkfeWToQ8EfDFGEMBrF48U1w4xZSm36P 200 1.014ms\n",">>> No observers found for event type change\n",">>> No observers found for event type change\n",">>> No observers found for event type change\n",">>> No observers found for event type change\n","127.0.0.1:39058 - [2022-03-16T15:13:18.723Z] GET:/bricking/vault/get-brick/14F1gP8fe4Af5HuCVwNJqubL3jpvp7HdEMNN24vibMck 200 1.612ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.723Z] PUT:/bricking/default/put-brick 201 1.129ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.733Z] PUT:/bricking/vault/put-brick 201 1.491ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.734Z] PUT:/bricking/default/put-brick 201 1.112ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.745Z] GET:/anchor/default/get-last-version/4K8K3xZfdsFugXRpFp9wP8ZEsPKWjnpMHNQq717xGp51AGhhWoaVJViNkTYk9Jo3MRfMBgm6PAErux4kB7JcpfVCvUb1ZX4eNxpP5Pd6fcepiD65SfHauUTSvS5CV17ZBc1Fobuq8KGextnEpgUF 200 1.135ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.744Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9 200 10.673ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.755Z] PUT:/anchor/default/create-anchor/4K8K3xZfdsFugXRpFp9wP8ZEsPKWjnpMHNQq717xGp51AGhhWoaVJViNkTYk9Jo3MRfMBgm6PAErux4kB7JcpfVCvUb1ZX4eNxpP5Pd6fcepiD65SfHauUTSvS5CV17ZBc1Fobuq8KGextnEpgUF/8iQ1THWriEFDQiKd2UTA7SvWGCRdykEe1m9MybVfGZVqYnkmQreVuyBxP3khjB3gnXhBvKzGMpsLE8vvRe2QSQ8ZiFtw4hJ39KGQ7yjTtui1BMSodU4wSKzve3CGewr3Ad4pXxYmcwTt8TFcnuaYJHgtzCcMpwhebcUQzwupW5QXCTsDs74F2eDU1P59mfyH8DC9vww8HwtPEheR67T73Gx1zBRG8yNXAfH 201 6.527ms\n","Failed to load JSON due to  Path </product.json> not found.\n","127.0.0.1:39058 - [2022-03-16T15:13:18.762Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iopcBeWmPDkHPJ1w8AGvH9cbeftaQz49YG9jvugLbR71roG9zbFg83qhSnghxRy2cziAfKvYAK3aVwVGK6gcn6vaXN1ombn9HH1NHgFxVfBzFZoCxVEfqbczzuqV9/PxygXrtbKyLQ522BXWKvZGrhf9sMND5hyLzGReu4Dxh1Y1B9wxXrhNbitYnYbGYeTDj5KKwyLz4CTEqjo6S3THFVB7aw2MCiMHaxcXgeautCnS6QSvxDhGqyqCpi3JJTtsHeVECnPPzZfTAtTco5UqF9eGHeVzjdqnFi1hgw97tnjttWgJcQZRuayK99wmXThjWzSxtQJqscuzQZz6SqENpdaTvU8WKZ 201 7.516ms\n","127.0.0.1:39058 - [2022-03-16T15:13:18.766Z] PUT:/bricking/default/put-brick 201 3.289ms\n",{"level":0,"message":"double-check has intercepted an unhandledRejection event","stack":"TypeError: Cannot read property 'toString' of undefined\n    at Object.promisify (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:56620:45)\n    at /home/runner/work/epi-workspace/epi-workspace/epi-utils/build/bundles/epiUtils.js:1677:16\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"},"Test should fail because: Unhandled Rejection! TypeError: Cannot read property 'toString' of undefined\n    at Object.promisify (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:56620:45)\n    at /home/runner/work/epi-workspace/epi-workspace/epi-utils/build/bundles/epiUtils.js:1677:16\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n","127.0.0.1:39058 - [2022-03-16T15:13:18.773Z] PUT:/bricking/default/put-brick 201 0.916ms\n","EPI Mapping Engine get called for domain:  default\n","No logs found for domain -  default\n","127.0.0.1:39058 - [2022-03-16T15:13:20.709Z] GET:/mappingEngine/default/logs 500 0.854ms\n","Request logs:\n","\t Generic Error Middleware prevented message to be sent on response.end {\"result\":\"Error\",\"message\":\"No logs\"}\n","\n\n","No results to parse, trying again ...\n","Process finished with errors!","Exit code: 1 Signal: null"]},"items":null},{"__meta":{"conf":{"runs":1},"parent":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests","isDirectory":false},"data":{"name":"leafletUploadLocalTest.js","path":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/leafletUploadLocalTest.js"},"result":{"state":"finished","pass":false,"executionTime":0,"runs":0,"asserts":[],"messages":["Logger not available, using console\n","Redefining require for node\n","VirtualMQ running in test environment\n","Logger not available, using console\n","Redefining require for node\n","VirtualMQ running in test environment\n","[TIR][INFO] Using the following options for launcher {\n  domains: [\n    { name: 'default', config: [Object] },\n    'test1',\n    'test2',\n    { name: 'vault', config: [Object] }\n  ],\n  serverConfig: {\n    activeComponents: [\n      'bdns',\n      'bricksLedger',\n      'bricksFabric',\n      'bricking',\n      'anchoring',\n      'epi-mapping-engine-results',\n      'mq'\n    ],\n    componentsConfig: { 'epi-mapping-engine-results': [Object] }\n  },\n  rootFolder: '/tmp/enclaveBuffering9204JEtw3H',\n  maxTries: 100,\n  bdns: null,\n  validatorDID: null,\n  validators: null,\n  useWorker: false,\n  bricksLedgerConfig: null,\n  includeDefaultDomains: true,\n  contractBuildFilePath: null,\n  generateValidatorDID: false,\n  onPortAquired: null,\n  onBeforeServerStart: null,\n  storageFolder: '/tmp/enclaveBuffering9204JEtw3H/external-volume'\n}\n","[TIR][INFO] Generated random port 15659\n","[TIR][INFO] TIR is checking if port 15659 is available. Please wait...\n","[TIR][INFO] Port 15659 is available\n","[TIR][INFO] Storing file 'apihub.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config... {\"activeComponents\":[\"bdns\",\"bricksLedger\",\"bricksFabric\",\"bricking\",\"anchoring\",\"epi-mapping-engine-results\",\"mq\"],\"componentsConfig\":{\"epi-mapping-engine-results\":{\"module\":\"/home/runner/work/epi-workspace/epi-workspace/epi-utils/\",\"function\":\"getEPIMappingEngineMessageResults\"}},\"host\":\"localhost\",\"port\":15659}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{\"enableBricksLedger\":false},\"commands\":{\"addAnchor\":\"anchor\"}},\"enable\":[\"mq\",\"enclave\"]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{}},\"enable\":[\"mq\"]}\n","[TIR][INFO] Using the following BDNS content for http://localhost:15659: {\n  default: {\n    replicas: [],\n    notifications: [ 'http://localhost:15659' ],\n    brickStorages: [ 'http://localhost:15659' ],\n    anchoringServices: [ 'http://localhost:15659' ],\n    contractServices: [ 'http://localhost:15659' ],\n    validators: []\n  },\n  test1: {\n    replicas: [],\n    notifications: [ 'http://localhost:15659' ],\n    brickStorages: [ 'http://localhost:15659' ],\n    anchoringServices: [ 'http://localhost:15659' ],\n    contractServices: [ 'http://localhost:15659' ],\n    validators: []\n  },\n  test2: {\n    replicas: [],\n    notifications: [ 'http://localhost:15659' ],\n    brickStorages: [ 'http://localhost:15659' ],\n    anchoringServices: [ 'http://localhost:15659' ],\n    contractServices: [ 'http://localhost:15659' ],\n    validators: []\n  },\n  vault: {\n    replicas: [],\n    notifications: [ 'http://localhost:15659' ],\n    brickStorages: [ 'http://localhost:15659' ],\n    anchoringServices: [ 'http://localhost:15659' ],\n    contractServices: [ 'http://localhost:15659' ],\n    validators: []\n  }\n}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:15659\"],\"brickStorages\":[\"http://localhost:15659\"],\"anchoringServices\":[\"http://localhost:15659\"],\"contractServices\":[\"http://localhost:15659\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:15659\"],\"brickStorages\":[\"http://localhost:15659\"],\"anchoringServices\":[\"http://localhost:15659\"],\"contractServices\":[\"http://localhost:15659\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:15659\"],\"brickStorages\":[\"http://localhost:15659\"],\"anchoringServices\":[\"http://localhost:15659\"],\"contractServices\":[\"http://localhost:15659\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering9204JEtw3H/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:15659\"],\"brickStorages\":[\"http://localhost:15659\"],\"anchoringServices\":[\"http://localhost:15659\"],\"contractServices\":[\"http://localhost:15659\"],\"validators\":[]}\n","[TIR][INFO] Starting apihub instance... [ 15659, '/tmp/enclaveBuffering9204JEtw3H' ]\n","Fix this: This could generate memory leaks. Fix it later\n","Trying to read the apihub.json file from the location pointed by PSK_CONFIG_LOCATION env variable.\n","Loading config for domain 'default'\n","Loading config for domain 'test1'\n","Loading config for domain 'test2'\n","Loading config for domain 'vault'\n","[API-HUB] Trying to listen on port 15659\n","Registering Logger middleware\n","[API-HUB] generic error middleware was loaded. This middleware will prevent any error to leak when sending a >=400 response to the client.\n","[API-HUB] Request API enhancements were set up.\n","Registering IframeHandler middleware\n","Using boot script for worker: /home/runner/work/epi-workspace/epi-workspace/privatesky/./psknode/bundles/nodeBoot.js\n","[API-HUB] Preparing to register middleware from path ./components/config\n","[API-HUB] Not able to find config for component called < bricksLedger >. Excluding it from the active components list!\n","[API-HUB] Preparing to register middleware from path ./components/bdns\n","[API-HUB] Preparing to register middleware from path ./components/bricksFabric\n","[API-HUB] Preparing to register middleware from path ./components/bricking\n","[API-HUB] Preparing to register middleware from path ./components/anchoring\n","[API-HUB] Preparing to register middleware from path /home/runner/work/epi-workspace/epi-workspace/epi-utils/\n","[API-HUB] Preparing to register middleware from path ./components/mqHub\n","Preparing to register mq endpoints for domain < default > ... \n","Loading Local MQ Adapter for domain: default\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Warning: Local MQ Adapter should be used only during development!\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Successfully register mq endpoints for domain < default >.\n","Preparing to register mq endpoints for domain < vault > ... \n","Loading Local MQ Adapter for domain: vault\n","!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Warning: Local MQ Adapter should be used only during development!\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n","Successfully register mq endpoints for domain < vault >.\n","[TIR][INFO] Using the following options for launcher {\n  domains: [\n    { name: 'default', config: [Object] },\n    'test1',\n    'test2',\n    { name: 'vault', config: [Object] }\n  ],\n  serverConfig: {\n    activeComponents: [\n      'bdns',\n      'bricksLedger',\n      'bricksFabric',\n      'bricking',\n      'anchoring',\n      'epi-mapping-engine',\n      'epi-mapping-engine-results'\n    ],\n    componentsConfig: {\n      'epi-mapping-engine': [Object],\n      'epi-mapping-engine-results': [Object]\n    }\n  },\n  rootFolder: '/tmp/enclaveBuffering8972zzXdKc',\n  maxTries: 100,\n  bdns: null,\n  validatorDID: null,\n  validators: null,\n  useWorker: false,\n  bricksLedgerConfig: null,\n  includeDefaultDomains: true,\n  contractBuildFilePath: null,\n  generateValidatorDID: false,\n  onPortAquired: null,\n  onBeforeServerStart: null,\n  storageFolder: '/tmp/enclaveBuffering8972zzXdKc/external-volume'\n}\n","[TIR][INFO] Generated random port 37220\n","[TIR][INFO] TIR is checking if port 37220 is available. Please wait...\n","[TIR][INFO] Port 37220 is available\n","[TIR][INFO] Storing file 'apihub.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config... {\"activeComponents\":[\"bdns\",\"bricksLedger\",\"bricksFabric\",\"bricking\",\"anchoring\",\"epi-mapping-engine\",\"epi-mapping-engine-results\"],\"componentsConfig\":{\"epi-mapping-engine\":{\"module\":\"/home/runner/work/epi-workspace/epi-workspace/epi-utils/\",\"function\":\"getEPIMappingEngineForAPIHUB\"},\"epi-mapping-engine-results\":{\"module\":\"/home/runner/work/epi-workspace/epi-workspace/epi-utils/\",\"function\":\"getEPIMappingEngineMessageResults\"}},\"host\":\"localhost\",\"port\":37220}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{\"enableBricksLedger\":false},\"commands\":{\"addAnchor\":\"anchor\"}},\"messagesEndPoints\":[{\"endPointId\":\"endpoint\",\"endPointURL\":\"http://localhost:15659/mappingEngine/default/default/saveResult\"}]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/domains... {}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/domains... {\"anchoring\":{\"type\":\"FS\",\"option\":{}},\"enable\":[\"mq\"]}\n","[TIR][INFO] Using the following BDNS content for http://localhost:37220: {\n  default: {\n    replicas: [],\n    notifications: [ 'http://localhost:37220' ],\n    brickStorages: [ 'http://localhost:37220' ],\n    anchoringServices: [ 'http://localhost:37220' ],\n    contractServices: [ 'http://localhost:37220' ],\n    validators: []\n  },\n  test1: {\n    replicas: [],\n    notifications: [ 'http://localhost:37220' ],\n    brickStorages: [ 'http://localhost:37220' ],\n    anchoringServices: [ 'http://localhost:37220' ],\n    contractServices: [ 'http://localhost:37220' ],\n    validators: []\n  },\n  test2: {\n    replicas: [],\n    notifications: [ 'http://localhost:37220' ],\n    brickStorages: [ 'http://localhost:37220' ],\n    anchoringServices: [ 'http://localhost:37220' ],\n    contractServices: [ 'http://localhost:37220' ],\n    validators: []\n  },\n  vault: {\n    replicas: [],\n    notifications: [ 'http://localhost:37220' ],\n    brickStorages: [ 'http://localhost:37220' ],\n    anchoringServices: [ 'http://localhost:37220' ],\n    contractServices: [ 'http://localhost:37220' ],\n    validators: []\n  }\n}\n","[TIR][INFO] Storing file 'default.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:37220\"],\"brickStorages\":[\"http://localhost:37220\"],\"anchoringServices\":[\"http://localhost:37220\"],\"contractServices\":[\"http://localhost:37220\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test1.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:37220\"],\"brickStorages\":[\"http://localhost:37220\"],\"anchoringServices\":[\"http://localhost:37220\"],\"contractServices\":[\"http://localhost:37220\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'test2.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:37220\"],\"brickStorages\":[\"http://localhost:37220\"],\"anchoringServices\":[\"http://localhost:37220\"],\"contractServices\":[\"http://localhost:37220\"],\"validators\":[]}\n","[TIR][INFO] Storing file 'vault.json' at /tmp/enclaveBuffering8972zzXdKc/external-volume/config/bdns... {\"replicas\":[],\"notifications\":[\"http://localhost:37220\"],\"brickStorages\":[\"http://localhost:37220\"],\"anchoringServices\":[\"http://localhost:37220\"],\"contractServices\":[\"http://localhost:37220\"],\"validators\":[]}\n","[TIR][INFO] Starting apihub instance... [ 37220, '/tmp/enclaveBuffering8972zzXdKc' ]\n","Fix this: This could generate memory leaks. Fix it later\n","Trying to read the apihub.json file from the location pointed by PSK_CONFIG_LOCATION env variable.\n","Loading config for domain 'default'\n","Loading config for domain 'test1'\n","Loading config for domain 'test2'\n","Loading config for domain 'vault'\n","[API-HUB] Trying to listen on port 37220\n","Registering Logger middleware\n","[API-HUB] generic error middleware was loaded. This middleware will prevent any error to leak when sending a >=400 response to the client.\n","[API-HUB] Request API enhancements were set up.\n","Registering IframeHandler middleware\n","Using boot script for worker: /home/runner/work/epi-workspace/epi-workspace/privatesky/./psknode/bundles/nodeBoot.js\n","[API-HUB] Preparing to register middleware from path ./components/config\n","[API-HUB] Not able to find config for component called < bricksLedger >. Excluding it from the active components list!\n","[API-HUB] Preparing to register middleware from path ./components/bdns\n","[API-HUB] Preparing to register middleware from path ./components/bricksFabric\n","[API-HUB] Preparing to register middleware from path ./components/bricking\n","[API-HUB] Preparing to register middleware from path ./components/anchoring\n","[API-HUB] Preparing to register middleware from path /home/runner/work/epi-workspace/epi-workspace/epi-utils/\n","[API-HUB] Preparing to register middleware from path /home/runner/work/epi-workspace/epi-workspace/epi-utils/\n","127.0.0.1:37220 - [2022-03-16T15:13:21.419Z] GET:/bdns 200 2.424ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.441Z] PUT:/bricking/default/put-brick 201 4.257ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.457Z] PUT:/bricking/default/put-brick 201 1.121ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.469Z] GET:/anchor/default/get-last-version/4K8K3xZfdsFugXRpFp9wP8ZEsPe3znMnACHbmYb2DmuMQdRf9oWnqyqfkc5ZLwDCgLb5jXRZGuyaYRr6d86MNErZfPZrNNyD5TPE6E1TKc6AhbPNtr854enV2HJAwCc7YXtaG78pkqz4uEwuDHpj 200 2.341ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.477Z] PUT:/anchor/default/create-anchor/4K8K3xZfdsFugXRpFp9wP8ZEsPe3znMnACHbmYb2DmuMQdRf9oWnqyqfkc5ZLwDCgLb5jXRZGuyaYRr6d86MNErZfPZrNNyD5TPE6E1TKc6AhbPNtr854enV2HJAwCc7YXtaG78pkqz4uEwuDHpj/8iQ1THWriEFDQiKd2UTA7SwqchvS9x3PDCMAvDQVnF7ftHNmH6mNz3rPGjFsNssiD9vFZ6jxmQxXvBpH4CgRP35pVkBVq5YooWtDpfo3b1GYRsgHGTzmmnWksV1Bi7QxKjwo8sYGZ4VHXtvMqLmivjRwTnEfBHH984m1aiNd9Y9MbVLd76etb4FvDZFMJyQXxgAmmSZzJwR9MVsWzyX5LeFDXstqE8oGXr7 201 3.27ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.487Z] PUT:/bricking/default/put-brick 201 1.074ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.492Z] PUT:/bricking/default/put-brick 201 1.04ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.498Z] GET:/anchor/default/get-last-version/4K8K3xZfdsFugXRpFp9wP8ZEsNrAsnkMHve5UvRy71suQibraq9e1BoXxqYcwGu1NzEUc3iuuQpKVh9qUHXNeUbNfxoJrjUCjEFS7Xq3o2UBVsWKn6AB1MB1NvkE893orahoFYR89hQ3gwQof2kX 200 1.261ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.503Z] PUT:/anchor/default/create-anchor/4K8K3xZfdsFugXRpFp9wP8ZEsNrAsnkMHve5UvRy71suQibraq9e1BoXxqYcwGu1NzEUc3iuuQpKVh9qUHXNeUbNfxoJrjUCjEFS7Xq3o2UBVsWKn6AB1MB1NvkE893orahoFYR89hQ3gwQof2kX/8iQ1THWriEFDQiKd2UTA7SudAEM2xUsYSuJAWqqKeKCdUHR9DB9yju4AQiZ75Am9ijUncWwKCKnq9AhiUjRuNMSQRYUkw12AdK8ZF3SFYfNtTYnbU42opaCchynVEhEsGVksiqnZhHaqa1y28ZyVPkY8qFNXLc8gCSUe6ugpdRXxkCvFy1vWGrU2NahUnbQ2GDRyLksiGKaEczP3jTHdA5pm2pTAQeu66cf 201 2.616ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.514Z] PUT:/bricking/default/put-brick 201 1.059ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.519Z] PUT:/bricking/default/put-brick 201 1.016ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.526Z] GET:/anchor/default/get-all-versions/4K8K3xZfdsFugXRpFp9wP8ZEsNrAsnkMHve5UvRy71suQibraq9e1BoXxqYcwGu1NzEUc3iuuQpKVh9qUHXNeUbNfxoJrjUCjEFS7Xq3o2UBVsWKn6AB1MB1NvkE893orahoFYR89hQ3gwQof2kX 200 11.204ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.543Z] PUT:/anchor/default/append-to-anchor/4K8K3xZfdsFugXRpFp9wP8ZEsNrAsnkMHve5UvRy71suQibraq9e1BoXxqYcwGu1NzEUc3iuuQpKVh9qUHXNeUbNfxoJrjUCjEFS7Xq3o2UBVsWKn6AB1MB1NvkE893orahoFYR89hQ3gwQof2kX/8iQ1THWriEFDQiKd2UTA7Sx6fjyT1JneiRwXJD862ahsXMVAuTdkEYsxtC3VmhetfxweN5oiNDSnBarPc9H6VEqTqeHaxFaFJ3JGaCZR3W4omRY73AurCchPwDxLryCH5DVkHo2jdj7ZQhQTTcEorEo2Smp8hbLfNHNuidx3vntEoTty9Mq8QWaHxXb8TrneFt56Mg76oevkSG5J5PLUNzh2WMvNoHxBH59 201 3.688ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.552Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.272ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.559Z] PUT:/bricking/vault/put-brick 201 1.159ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.564Z] PUT:/bricking/vault/put-brick 201 0.943ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.569Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB 200 1.184ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.575Z] PUT:/anchor/vault/create-anchor/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB/PxygXrtbKyLQ522BXWKx1bSLeo67SnoLPN7WTBZrz5iQExskLBQkmGhBKXrDdMSg15CF3nLG8fMweye9S2sNL5KLAN2N2SHbcsH91XCTLka1MitnQXoiuCMieRYctEnhCuEwZiuUH2DrT1VEjeQL9sDcM88nJSS7WHf9YrwxVX5q8ZbmnyTy86hvL38cWCM9U2vBzoECLs8uGKUhuhVV6dC9CPJ9QMCj 201 2.602ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.582Z] PUT:/bricking/vault/put-brick 201 1.022ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.585Z] PUT:/bricking/vault/put-brick 201 1.042ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.588Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.211ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.591Z] PUT:/anchor/vault/create-anchor/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd/2ZJYQfUMTmozJapVdoEXnpqUsCRSF3d3dNzVXfmgWCc5c5iRE74XdrWDRi6wrWzsrr4oRwuB4gDDquHxRUAj 201 1.403ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.595Z] PUT:/bricking/vault/put-brick 201 1.01ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.599Z] PUT:/bricking/vault/put-brick 201 1.026ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.606Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB 200 4.124ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.613Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB/PxygXrtbKyLQ522BXWKxGnTSSKoRBZoYUQpHttLmyMvwVsDNY28wuxFxNyMhcr4DZJtdTUXoHESUD4ZbKDFgLEgDGBxQ4FijQ9nZ8f9PA39XqZkQ1spntCRxqHHmje3m21LiavQB3iCo9mx4Bonkh4LjxshDsQqSWKyWXk8EgpVdJoUcjepJyyqagn4drEwNAzaLXrjT1mqH4kgfc2uGmJ6v1CYPdsmH 201 3.742ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.619Z] GET:/bricking/vault/get-brick/ChYN7wWtuwjMovE9USmFNrgf8exZFwGGRf8fbPyE5Ss1 200 1.191ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.624Z] PUT:/bricking/vault/put-brick 201 0.936ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.629Z] PUT:/bricking/vault/put-brick 201 0.947ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.634Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8ioqj5vHjrGNvaccomzgdwMDat3cuj5XQ563raXuX5TCFMRBspoHYYmXJaY5G5JaGkgPcFejjxftMPeqzzBWQSbTYikGe4y553werLYS8TnXawXvRjctQQ261XSySX 200 1.135ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.639Z] PUT:/anchor/vault/create-anchor/ArzZh8TxNMevR6QanDX8ioqj5vHjrGNvaccomzgdwMDat3cuj5XQ563raXuX5TCFMRBspoHYYmXJaY5G5JaGkgPcFejjxftMPeqzzBWQSbTYikGe4y553werLYS8TnXawXvRjctQQ261XSySX/PxygXrtbKyLQ522BXWKvYFEhSBdHJifkEPs9DSZ7zej13rYc4WqRPxS5rbob1ggVSdLnjrgvK6cqmayfQdhMhgzUPZqPpB8VjVREZDYFKPtc6amXLygF2Z4k5sRQokumGkByvNT1CRP5z61xzq5MQbPWmPwMM1eyKgnvhPgHGK831SVrub69HX69hAPyWihseKdYM3hLWrjdd1wMN7qiQMDANTWUG62T 201 2.532ms\n","The function \"getWalletDB is obsolete. Use getSimpleWalletDB instead\n","127.0.0.1:37220 - [2022-03-16T15:13:21.651Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8ioqj5vHjrGNvaccomzgdwMDat3cuj5XQ563raXuX5TCFMRBspoHYYmXJaY5G5JaGkgPcFejjxftMPeqzzBWQSbTYikGe4y553werLYS8TnXawXvRjctQQ261XSySX 200 1.821ms\n",">>> No observers found for event type initialised\n","Finishing initialisation\n",">>> No observers found for event type warn\n>>> Loading a shared database\n","127.0.0.1:37220 - [2022-03-16T15:13:21.658Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.488ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.661Z] PUT:/bricking/vault/put-brick 201 1.136ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.666Z] PUT:/bricking/vault/put-brick 201 1.026ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.672Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB 200 3.881ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.681Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB/6Cn1oQzTMcRLGs5M4Hcai9LoPG3S4SNEfpPvP8cMtZEg5VyTgmW9e6wH6EUQ542Q6hEZRYQfDrM9tD3ZQnh2eMb3SNYQnzYofoBVtFrW3ssToe6iUYuneWy55j9wc9V4uvUPfwHxuaFDfgjv2gH37L8PFaKTtNdqedwZJPd2PgMwmHP86G6nfdpy3ZXetu8fxxfwYtgZtzpFrDZzR18x5XxqgmQAiQX 201 3.338ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.687Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.287ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.689Z] GET:/bricking/vault/get-brick/8GGCV5z5W7v46rf4BDmxZL2koF5ANYww52Es79Hu7Jck 200 0.892ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.694Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 10.901ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.712Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.297ms\n",">>> No observers found for event type initialised\n",">>> No observers found for event type initialised\n","127.0.0.1:37220 - [2022-03-16T15:13:21.717Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.286ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.721Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.292ms\n","The function \"getWalletDB is obsolete. Use getSimpleWalletDB instead\n","127.0.0.1:37220 - [2022-03-16T15:13:21.728Z] GET:/anchor/vault/get-last-version/ArzZh8TxNMevR6QanDX8ioqj5vHjrGNvaccomzgdwMDat3cuj5XQ563raXuX5TCFMRBspoHYYmXJaY5G5JaGkgPcFejjxftMPeqzzBWQSbTYikGe4y553werLYS8TnXawXvRjctQQ261XSySX 200 2.768ms\n",">>> No observers found for event type initialised\n","Finishing initialisation\n",">>> No observers found for event type warn\n",">>> Loading a shared database\n","127.0.0.1:37220 - [2022-03-16T15:13:21.730Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 2.679ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.738Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 2.575ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.743Z] PUT:/bricking/vault/put-brick 201 0.97ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.748Z] PUT:/bricking/vault/put-brick 201 0.926ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.753Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB 200 4.826ms\n","127.0.0.1:37220 - [2022-03-16T15:13:21.762Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB/PxygXrtbKyLQ522BXWKwkbifTtHbxQF3C95JTseK1pSj9YG5wfHd7kP6xPL51DhEkyyShdeUS6Wd9jnEKB4N66jvwzNADtdvgGVQNXNUUNASRAPVVhEko9enaoLsoFyE2Sxz3eCB97vmMHJ1axi7P9VXmABVbuyypzfttshyzXFtZU7BZqUtxoqq5QPDSbJPBPht4DxJYQBTinDrLN2j8VD3Hd4fi1j5 201 3.506ms\n","Function already promisified\n","EPI Mapping Engine called for domain:  default, and walletSSI : BBudGH6ySHG6GUHN8ogNrTWb5hzFRtDpbLemHHqsZhHQSLNYKGG4Gn4aPmqxoVMVrz5tGduus1Vf6LW5sC1HgtD83\n","[API-HUB] apihub.getServerConfig() method is deprecated, please use server.config.getDomainConfig(...) to retrieve necessary info.\n","127.0.0.1:37220 - [2022-03-16T15:13:22.066Z] GET:/anchor/default/get-last-version/4K8K3xZfdsFugXRpFp9wP8ZEsNrAsnkMHve5UvRy71suQibraq9e1BoXxqYcwGu1NzEUc3iuuQpKVh9qUHXNeUbNfxoJrjUCjEFS7Xq3o2UBVsWKn6AB1MB1NvkE893orahoFYR89hQ3gwQof2kX 200 2.068ms\n","127.0.0.1:37220 - [2022-03-16T15:13:22.070Z] GET:/bricking/default/get-brick/FepqQBrQNDHJ9NRQgZpSQrqjgPR5gsgrdGWuMarkrzQV 200 0.945ms\n","127.0.0.1:37220 - [2022-03-16T15:13:22.059Z] PUT:/mappingEngine/default/default 200 18.664ms\n","127.0.0.1:37220 - [2022-03-16T15:13:22.079Z] GET:/anchor/vault/get-last-version/7saRdSm81FqYLzhW8xB5TD77WKFiQBZVgs9tEZZJhC17TY6ri7uah4pnnJaHuekp6VMS9L1cDuSJGefugmhfd 200 1.396ms\n","127.0.0.1:37220 - [2022-03-16T15:13:22.081Z] GET:/bricking/vault/get-brick/FWWeq7P2g9m3V767oLUFVKwsBoR6hEM1aVfiGCHSompk 200 0.895ms\n","127.0.0.1:37220 - [2022-03-16T15:13:22.086Z] PUT:/bricking/vault/put-brick 201 0.983ms\n","127.0.0.1:37220 - [2022-03-16T15:13:22.092Z] GET:/anchor/vault/get-all-versions/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB 200 6.036ms\n","127.0.0.1:37220 - [2022-03-16T15:13:22.102Z] PUT:/anchor/vault/append-to-anchor/ArzZh8TxNMevR6QanDX8iorMRHpDLfywaHhkeWWCFUTQyttt7XT1KbFTZLEYCxHMxn5MyhvRBATx6UciYxo7KhcUni5VwwbXBueXpmUL4WjfWcoGnTJWhWRrmuThgKsAn5kvvKFijuWCVh5xB/PxygXrtbKyLQ522BXWKv34BYk6xY7qFQ6QTgvqfi6VGX11YQTJAfZ4rU2jUkFh2B6iJ1NZdjGZ7E9p7Z42Fwdrn6vABTcsG5E2VHXbvACgYztk1H1oaoBwLUhzF7xgEibTc7pd2UF1c7xg7USpSie92XXFA6ZoF3CBNtEqnCgxKtQeoe3A2BPzTGx4bznrhd8cGWtDX1nG2ZCfvMzee1ZrRsLCmVoytK 201 3.755ms\n",{"level":0,"message":"double-check has intercepted an unhandledRejection event","stack":"TypeError: Cannot read property 'toString' of undefined\n    at Object.promisify (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:56620:45)\n    at /home/runner/work/epi-workspace/epi-workspace/epi-utils/build/bundles/epiUtils.js:1677:16\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"},"Test should fail because: Unhandled Rejection! TypeError: Cannot read property 'toString' of undefined\n    at Object.promisify (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:56620:45)\n    at /home/runner/work/epi-workspace/epi-workspace/epi-utils/build/bundles/epiUtils.js:1677:16\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n","EPI Mapping Engine get called for domain:  default\n","No logs found for domain -  default\n","127.0.0.1:37220 - [2022-03-16T15:13:24.080Z] GET:/mappingEngine/default/logs 500 0.893ms\n","Request logs:\n","\t Generic Error Middleware prevented message to be sent on response.end {\"result\":\"Error\",\"message\":\"No logs\"}\n","\n\n","No results to parse, trying again ...\n","Process finished with errors!","Exit code: 1 Signal: null"]},"items":null},{"__meta":{"conf":{"runs":1},"parent":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests","isDirectory":false},"data":{"name":"leafletUploadTest.js","path":"/home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/leafletUploadTest.js"},"result":{"state":"finished","pass":false,"executionTime":0,"runs":0,"asserts":[{"level":1,"type":"assert","timestamp":1647443701568,"message":"[Fail] Assert or invariant has failed  expression is false but is expected to be true","stack":"Error: Assert or invariant has failed  expression is false but is expected to be true\n    at ExceptionsCore.assertFail (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:22821:21)\n    at AssertCore.true (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:22867:27)\n    at /home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/leafletUploadTest.js:52:16\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)","exception":"Assert or invariant has failed  expression is false but is expected to be true"},{"level":11,"type":"assert","timestamp":1647443701570,"message":"[Pass] ApiHub leaflet upload performance test"}],"messages":["Logger not available, using console\n","Redefining require for node\n","VirtualMQ running in test environment\n","Function already promisified\n","Function already promisified\n","New GTIN_SSI in domain:epi and bricksDomain:default\n","Number of dsu leaflets is: 10\n","Error on put message  Error: Assert or invariant has failed  expression is false but is expected to be true\n    at ExceptionsCore.assertFail (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:22821:21)\n    at AssertCore.true (/home/runner/work/epi-workspace/epi-workspace/privatesky/psknode/bundles/testsRuntime.js:22867:27)\n    at /home/runner/work/epi-workspace/epi-workspace/epi-utils/tests/leafletUploadTest.js:52:16\n    at processTicksAndRejections (internal/process/task_queues.js:95:5) {\n  isFailedAssert: true\n}\n","Process finished with errors!","Exit code: 1 Signal: null"]},"items":null}],"startDate":1647443597609,"endDate":1647443703580,"runned":5});
</script>
</html>